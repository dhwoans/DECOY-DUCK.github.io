## 가상 메모리 교체 알고리즘

>💡기본 아이디어    
>프로세스가 가상메모리를 사용하게 하고 데이터를 읽고 쓸때 물리 주소로 변환


![image](https://user-images.githubusercontent.com/51963264/195114241-44f9d1c5-4504-41c0-912e-b1115e6c4cd5.png)

마치 메인메모리-캐시메모리 관계처럼 메인메모리도 2차저장치를 위한 캐시로 이용될 수 있다.
이런 기술을 우리는 `가상 메모리(virtual memory)`라고 부른다. 

가상 메모리를 사용했을 때 얻을 수 있는 이점은 크게 두 가지 있다.    

1. 다수의 프로그램을 동시에 수행할때 메모리를 효과적으로 사용할 수 있다.
2. 메인 메모리에서 프로그래밍해야 하는 제약을 제거할 수 있다.


### 교체 알고리즘

​가상 메모리의 작업단위를 `페이지 (page)` 라 부르고 프로그램 전체를 메모리에 적재하지 않는 대신, 초기에 필요한 것들만 미리 메모리에 할당하는 `요구 페이징 (Demand Paging)`이라는 전략을 주로 사용한다.​

 프로그램 실행 시 필요한 페이지가 요구 페이징 전략으로 할당되지 않았을 수도 있다. 즉, 필요로 하는 페이지가 주기억장치에 없는 `페이지 부재 (Page Fault)`가 발생할 수 있다.

​페이지 부재가 발생하게 되면, 원하는 페이지를 보조기억장치에서 가져와서 적재해야 하는데 이때 적재할 공간이 부족하다면 주기억장치에 존재하는 페이지를 삭제해야하는데 이때 교체 알고리즘이 사용된다.

대표적인 알고리즘으로는 FIFO,LRU,LFU가 있다.

### 지역성

CPU가 참조하는 주소가 메모리 전체에 고루 분포되는 것이 아니라 특정 영역에 집중되는 성질을 말하는데 페이지 교체 알고리즘이 대상 페이지를 찾을 때는 지역성을 바탕으로 한다.

공간의 지역성 : 현재 위치에서 가까운 데이터에 접근할 확률이 먼 거리에 있는 데이터에 접근할 확률보다 높다는것을 의미

시간의 지역성 : 현재를 기준으로 최근에 접근한 데이터가 또 다시 사용될 확률이 높다는 것을 의미.

<img width="652" alt="image" src="https://user-images.githubusercontent.com/51963264/199133237-f237898d-6402-495c-a25a-4f9b9278091c.png">

### FIFO

>메모리에 가장 먼저 올라온 페이지를 교체하는 알고리즘

`FIFO (First-In First-Out)알고리즘`은 이름 그대로 가장 먼저 메모리에 올라온 페이지를 가장 먼저 내보내는 알고리즘이다. FIFO 알고리즘은 큐로 구현할수 있다. 항상 새로운 페이지는 맨 아래로 삽입되며 메모리가 꽉 차면 오래된 페이지가 제거되는 단순한 구조이기 때문에 구현이 간단하지만 무조건 오래된 페이지만 교체되기 때문에 성능은 좋지 않은 편이다.

### LRU

> 앞으로 가장 오랫동안 사용되지 않을 페이지를 교체하는 알고리즘

`LRU(Least Recently Used) 알고리즘`은 페이지에 접근한 시간을 기준으로 페이지를 결정한다. 시간 지역성에 의해 최근에 참조된 페이지가 미래에 다시 참조될 가능성이 높기 때문에  LRU 알고리즘은 이와 같은 성질을 활용해서 페이지 교체 시 가장 오래전에 참조가 이루어진 페이지를 내보낸다. 

### LFU

>최근에 사용하지 않은 페이지를 가장 먼저 내보내는 알고리즘

`LFU 알고리즘 (Least Frequently Used Algorithm)`은
물리적 메모리 내에 존재하는 페이지 중에서 과거에 참조 횟수가 가장 적은 페이지를 교체 시킬 페이지로 결정하는 알고리즘이다. 카운터나 참조비트를 이요해 구현할수 있는데 구현에 상당한 비용이 들기 때문에 잘 쓰이지 않는다.

